@using MovieReviewApp.Extensions

<div class="timeline-item timeline-item-future-award">
    <h5 class="timeline-heading-orange">
        <i class="bi bi-trophy me-2"></i>
        Future Awards Month
    </h5>
    <div class="timeline-content">
        <span class="timeline-date">@AwardDate.ToLocalDisplay().ToString("MMMM yyyy")</span>
        @if (EligibleMovies.Any())
        {
            <div class="mt-2">
                <div class="timeline-person fw-bold mb-2">Eligible Movies:</div>
                <div class="d-flex flex-wrap gap-2">
                    @{
                        Random rand = new Random(PhaseNumber);
                        List<string> randomizedMovies = EligibleMovies
                            .Select(m => new { Movie = m, Order = rand.Next() })
                            .OrderBy(x => x.Order)
                            .Select(x => x.Movie)
                            .ToList();
                    }
                    @foreach (string movie in randomizedMovies)
                    {
                        <span class="badge movie-badge-primary">
                            @movie.Trim()
                        </span>
                    }
                </div>
            </div>
        }
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public int PhaseNumber { get; set; }

    [Parameter, EditorRequired]
    public DateTime AwardDate { get; set; }

    [Parameter, EditorRequired]
    public List<string> EligibleMovies { get; set; } = new();
}